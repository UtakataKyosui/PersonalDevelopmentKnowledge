# ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

## ğŸš€ æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€LIFFç‰ˆæœè–¬ç®¡ç†ã‚¢ãƒ—ãƒªã‚’æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®è©³ç´°ãªæ‰‹é †ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### å¯¾è±¡ç’°å¢ƒ
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Vercel (æ¨å¥¨) / Netlify
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Cloudflare Workers (æ¨å¥¨)
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Cloudflare D1
- **LINEè¨­å®š**: LINE Developers Console

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶
- HTTPSå¿…é ˆ (LIFFè¦ä»¶)
- ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ç®¡ç†
- CORSè¨­å®š
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- ãƒ­ã‚°ç›£è¦–

## ğŸŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Vercel ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
```json
// vercel.json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "installCommand": "npm ci",
  "framework": "vite",
  "env": {
    "VITE_API_BASE_URL": "https://medicine-liff-api.your-subdomain.workers.dev",
    "VITE_LIFF_ID": "your-production-liff-id",
    "VITE_APP_ENV": "production"
  },
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Frame-Options",
          "value": "ALLOWALL"
        },
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "Referrer-Policy",
          "value": "strict-origin-when-cross-origin"
        },
        {
          "key": "Permissions-Policy",
          "value": "camera=(), microphone=(), geolocation=()"
        }
      ]
    }
  ],
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

#### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# Vercelç’°å¢ƒå¤‰æ•°ï¼ˆDashboardè¨­å®šï¼‰
VITE_API_BASE_URL=https://medicine-liff-api.your-subdomain.workers.dev
VITE_LIFF_ID=your-production-liff-id
VITE_APP_ENV=production
VITE_APP_VERSION=1.0.0
```

#### ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰
```bash
# åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npm install -g vercel
vercel login
vercel --prod

# ç¶™ç¶šçš„ãƒ‡ãƒ—ãƒ­ã‚¤
git push origin main  # è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

# æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤
vercel --prod
```

### Netlifyä»£æ›¿è¨­å®š

#### netlify.toml
```toml
[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  VITE_API_BASE_URL = "https://medicine-liff-api.your-subdomain.workers.dev"
  VITE_LIFF_ID = "your-production-liff-id"
  VITE_APP_ENV = "production"

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "ALLOWALL"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

## âš¡ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ (Cloudflare Workers)

### Cloudflare Workersè¨­å®š

#### wrangler.tomlå®Œå…¨ç‰ˆ
```toml
name = "medicine-liff-api"
main = "src/index.ts"
compatibility_date = "2024-11-01"
node_compat = true

# é–‹ç™ºç’°å¢ƒ
[env.development]
vars = { ENVIRONMENT = "development", LOG_LEVEL = "debug" }

[env.development.vars]
LIFF_ID = "your-dev-liff-id"

[[env.development.d1_databases]]
binding = "DB"
database_name = "medicine-db-dev"
database_id = "your-dev-db-id"

# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
[env.staging]
vars = { ENVIRONMENT = "staging", LOG_LEVEL = "info" }

[env.staging.vars]
LIFF_ID = "your-staging-liff-id"

[[env.staging.d1_databases]]
binding = "DB"
database_name = "medicine-db-staging"
database_id = "your-staging-db-id"

# æœ¬ç•ªç’°å¢ƒ
[env.production]
vars = { ENVIRONMENT = "production", LOG_LEVEL = "warn" }

[env.production.vars]
LIFF_ID = "your-production-liff-id"

[[env.production.d1_databases]]
binding = "DB"
database_name = "medicine-db-production"
database_id = "your-production-db-id"

# Cron Triggersï¼ˆæœ¬ç•ªã®ã¿ï¼‰
[[env.production.triggers]]
crons = ["0 */15 * * * *"] # 15åˆ†æ¯ã«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒã‚§ãƒƒã‚¯

[[env.production.triggers]]
crons = ["0 20 * * 0"] # æ¯é€±æ—¥æ›œ20æ™‚ã«ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡

[build]
command = "npm run build"
```

#### ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¨­å®š
```bash
# LINEè¨­å®š
wrangler secret put LINE_CHANNEL_ACCESS_TOKEN --env production
wrangler secret put LINE_CHANNEL_SECRET --env production

# JWTè¨­å®š
wrangler secret put JWT_SECRET --env production

# ãã®ä»–ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
wrangler secret put ENCRYPTION_KEY --env production
```

#### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
```bash
# 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npm run db:migrate:prod

# 2. å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# 3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# 4. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy

# 5. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl https://medicine-liff-api.your-subdomain.workers.dev/health
```

### D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
```bash
# é–‹ç™ºç’°å¢ƒ
wrangler d1 create medicine-db-dev

# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
wrangler d1 create medicine-db-staging

# æœ¬ç•ªç’°å¢ƒ
wrangler d1 create medicine-db-production
```

#### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
```bash
# ã‚¹ã‚­ãƒ¼ãƒç”Ÿæˆ
npm run db:generate

# é–‹ç™ºç’°å¢ƒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
wrangler d1 migrations apply medicine-db-dev --env development

# æœ¬ç•ªç’°å¢ƒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
wrangler d1 migrations apply medicine-db-production --env production
```

## ğŸ“± LINEè¨­å®š

### LINE Developers Consoleè¨­å®š

#### ãƒãƒ£ãƒ³ãƒãƒ«åŸºæœ¬è¨­å®š
```json
{
  "channelType": "LINE Login",
  "channelName": "æœè–¬ç®¡ç†ã‚¢ãƒ—ãƒª",
  "channelDescription": "æ¯æ—¥ã®æœè–¬ç®¡ç†ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¢ãƒ—ãƒªã§ã™",
  "appIcon": "https://your-cdn.com/app-icon.png",
  "privacyPolicyUrl": "https://your-liff-app.vercel.app/privacy",
  "termsOfUseUrl": "https://your-liff-app.vercel.app/terms"
}
```

#### LIFFè¨­å®š
```json
{
  "endpointUrl": "https://your-liff-app.vercel.app",
  "scope": ["profile", "openid"],
  "botPrompt": "aggressive",
  "features": {
    "ble": false,
    "qrCodeReader": false
  },
  "permanentLinkPattern": "concat"
}
```

#### Messaging APIè¨­å®š
```json
{
  "webhookUrl": "https://medicine-liff-api.your-subdomain.workers.dev/webhook/line",
  "useWebhook": true,
  "webhookRedelivery": true,
  "allowOrigin": [
    "https://your-liff-app.vercel.app"
  ]
}
```

### æ¨©é™è¨­å®š
```json
{
  "scopes": [
    "profile",
    "openid",
    "email"
  ],
  "botPrompt": "aggressive",
  "staticPrompt": "add"
}
```

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

### HTTPS/SSLè¨¼æ˜æ›¸
```bash
# Vercelã¯è‡ªå‹•ã§HTTPSåŒ–
# Cloudflare Workersã‚‚è‡ªå‹•ã§HTTPS

# ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
vercel domains add your-app.example.com
```

### CORSè¨­å®š
```typescript
// Cloudflare Workers CORSè¨­å®š
app.use('*', cors({
  origin: (origin) => {
    const allowedOrigins = [
      'https://liff.line.me',
      'https://your-liff-app.vercel.app',
      'https://your-app.example.com' // ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³
    ]
    
    // é–‹ç™ºç’°å¢ƒ
    if (origin?.includes('localhost') || origin?.includes('127.0.0.1')) {
      return origin
    }
    
    return allowedOrigins.includes(origin || '') ? origin : null
  },
  allowMethods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
  allowHeaders: ['Content-Type', 'Authorization'],
  credentials: true,
  maxAge: 86400 // 24æ™‚é–“
}))
```

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™
```typescript
// rate-limiting.ts
import { Context, Next } from 'hono'

interface RateLimitConfig {
  windowMs: number
  maxRequests: number
}

const rateLimitConfigs: Record<string, RateLimitConfig> = {
  '/api/auth': { windowMs: 15 * 60 * 1000, maxRequests: 10 }, // 15åˆ†ã§10å›
  '/api/medicines': { windowMs: 60 * 1000, maxRequests: 30 }, // 1åˆ†ã§30å›
  '/api/logs': { windowMs: 60 * 1000, maxRequests: 60 }, // 1åˆ†ã§60å›
}

export async function rateLimitMiddleware(c: Context, next: Next) {
  const path = c.req.path
  const clientIP = c.req.header('CF-Connecting-IP') || 'unknown'
  
  // ãƒ‘ã‚¹ã«å¿œã˜ãŸåˆ¶é™è¨­å®šã‚’å–å¾—
  const config = Object.entries(rateLimitConfigs)
    .find(([route]) => path.startsWith(route))?.[1]
  
  if (!config) {
    await next()
    return
  }
  
  // KVã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ãŸãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…
  const key = `rate_limit:${clientIP}:${path}`
  const requests = await c.env.RATE_LIMIT_KV?.get(key)
  const currentCount = requests ? parseInt(requests) : 0
  
  if (currentCount >= config.maxRequests) {
    return c.json(
      { error: 'Too many requests' }, 
      429,
      { 'Retry-After': (config.windowMs / 1000).toString() }
    )
  }
  
  // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å¢—åŠ 
  await c.env.RATE_LIMIT_KV?.put(
    key, 
    (currentCount + 1).toString(), 
    { expirationTtl: config.windowMs / 1000 }
  )
  
  await next()
}
```

## ğŸ“Š ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®š

### Cloudflare Analytics
```typescript
// analytics.ts
export function trackEvent(eventName: string, properties: Record<string, any>) {
  // Cloudflare Analytics Workerså‘ã‘å®Ÿè£…
  console.log('Event:', eventName, properties)
  
  // æœ¬ç•ªç’°å¢ƒã§ã®ã¿åˆ†æã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡
  if (process.env.ENVIRONMENT === 'production') {
    // ã‚«ã‚¹ã‚¿ãƒ åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«é€ä¿¡
    // ã¾ãŸã¯å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆGoogle Analytics 4ç­‰ï¼‰ã«é€ä¿¡
  }
}

// ä½¿ç”¨ä¾‹
trackEvent('medication_logged', {
  userId: user.id,
  medicineId: medicine.id,
  timestamp: new Date().toISOString()
})
```

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```typescript
// health-check.ts
export async function healthCheck(c: Context) {
  const checks = {
    database: false,
    lineApi: false,
    memory: false
  }
  
  try {
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒã‚§ãƒƒã‚¯
    await c.env.DB.prepare('SELECT 1').first()
    checks.database = true
  } catch (error) {
    console.error('Database health check failed:', error)
  }
  
  try {
    // LINE APIæ¥ç¶šãƒã‚§ãƒƒã‚¯
    const response = await fetch('https://api.line.me/v2/bot/info', {
      headers: {
        'Authorization': `Bearer ${c.env.LINE_CHANNEL_ACCESS_TOKEN}`
      }
    })
    checks.lineApi = response.ok
  } catch (error) {
    console.error('LINE API health check failed:', error)
  }
  
  // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒã‚§ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰
  checks.memory = true
  
  const isHealthy = Object.values(checks).every(Boolean)
  
  return c.json({
    status: isHealthy ? 'healthy' : 'unhealthy',
    timestamp: new Date().toISOString(),
    checks,
    version: '1.0.0',
    environment: c.env.ENVIRONMENT || 'unknown'
  }, isHealthy ? 200 : 503)
}
```

## ğŸ¯ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

### GitHub Actions å®Œå…¨ç‰ˆ
```yaml
# .github/workflows/deploy.yml
name: Deploy Medicine LIFF App

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

env:
  NODE_VERSION: '18'

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Type check
        run: npm run type-check
      
      - name: Lint
        run: npm run lint
      
      - name: Unit tests
        run: npm test
      
      - name: Build frontend
        run: |
          cd frontend
          npm ci
          npm run build
      
      - name: E2E tests
        run: |
          cd frontend
          npm run test:e2e

  deploy-staging:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop'
    environment: staging
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Deploy backend to staging
        uses: cloudflare/wrangler-action@v3
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          command: deploy --env staging
        env:
          LINE_CHANNEL_ACCESS_TOKEN: ${{ secrets.STAGING_LINE_CHANNEL_ACCESS_TOKEN }}
          LINE_CHANNEL_SECRET: ${{ secrets.STAGING_LINE_CHANNEL_SECRET }}
          JWT_SECRET: ${{ secrets.STAGING_JWT_SECRET }}
      
      - name: Deploy frontend to staging
        run: |
          cd frontend
          npm ci
          VITE_API_BASE_URL=${{ secrets.STAGING_API_URL }} \
          VITE_LIFF_ID=${{ secrets.STAGING_LIFF_ID }} \
          npm run build
          npx vercel --token ${{ secrets.VERCEL_TOKEN }} --prod --scope ${{ secrets.VERCEL_TEAM }}

  deploy-production:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    environment: production
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run database migrations
        run: |
          npx wrangler d1 migrations apply medicine-db-production --env production
        env:
          CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          CLOUDFLARE_ACCOUNT_ID: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
      
      - name: Deploy backend to production
        uses: cloudflare/wrangler-action@v3
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          command: deploy --env production
        env:
          LINE_CHANNEL_ACCESS_TOKEN: ${{ secrets.PRODUCTION_LINE_CHANNEL_ACCESS_TOKEN }}
          LINE_CHANNEL_SECRET: ${{ secrets.PRODUCTION_LINE_CHANNEL_SECRET }}
          JWT_SECRET: ${{ secrets.PRODUCTION_JWT_SECRET }}
      
      - name: Deploy frontend to production
        run: |
          cd frontend
          npm ci
          VITE_API_BASE_URL=${{ secrets.PRODUCTION_API_URL }} \
          VITE_LIFF_ID=${{ secrets.PRODUCTION_LIFF_ID }} \
          npm run build
          npx vercel --token ${{ secrets.VERCEL_TOKEN }} --prod --scope ${{ secrets.VERCEL_TEAM }}
      
      - name: Health check
        run: |
          sleep 30  # ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã‚’å¾…æ©Ÿ
          curl -f ${{ secrets.PRODUCTION_API_URL }}/health || exit 1
      
      - name: Notify success
        if: success()
        run: echo "âœ… Production deployment successful!"
```

## ğŸ“‹ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ç¢ºèªäº‹é …

- [ ] **ç’°å¢ƒå¤‰æ•°è¨­å®š**
  - [ ] LIFF IDè¨­å®šæ¸ˆã¿
  - [ ] LINE APIãƒˆãƒ¼ã‚¯ãƒ³è¨­å®šæ¸ˆã¿
  - [ ] JWTç§˜å¯†éµè¨­å®šæ¸ˆã¿
  - [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±è¨­å®šæ¸ˆã¿

- [ ] **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š**
  - [ ] HTTPSæœ‰åŠ¹åŒ–ç¢ºèª
  - [ ] CORSé©åˆ‡ã«è¨­å®š
  - [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…æ¸ˆã¿
  - [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®šæ¸ˆã¿

- [ ] **æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
  - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å‹•ä½œç¢ºèª
  - [ ] è–¬ç®¡ç†æ©Ÿèƒ½å‹•ä½œç¢ºèª
  - [ ] é€šçŸ¥æ©Ÿèƒ½å‹•ä½œç¢ºèª
  - [ ] ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½å‹•ä½œç¢ºèª

- [ ] **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
  - [ ] ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é€Ÿåº¦ç¢ºèª
  - [ ] APIå¿œç­”æ™‚é–“ç¢ºèª
  - [ ] è² è·ãƒ†ã‚¹ãƒˆå®Ÿæ–½

- [ ] **ç›£è¦–è¨­å®š**
  - [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯è¨­å®šæ¸ˆã¿
  - [ ] ãƒ­ã‚°ç›£è¦–è¨­å®šæ¸ˆã¿
  - [ ] ã‚¨ãƒ©ãƒ¼é€šçŸ¥è¨­å®šæ¸ˆã¿
  - [ ] åˆ†æãƒ„ãƒ¼ãƒ«è¨­å®šæ¸ˆã¿

- [ ] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
  - [ ] APIä»•æ§˜æ›¸æœ€æ–°åŒ–
  - [ ] ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †æ›¸ç¢ºèª
  - [ ] éšœå®³å¯¾å¿œæ‰‹é †æ›¸æº–å‚™
  - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«æº–å‚™

### ç·Šæ€¥æ™‚ã®å¯¾å¿œæ‰‹é †

#### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †
```bash
# 1. å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª
wrangler deployments list --env production

# 2. å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
wrangler rollback [DEPLOYMENT_ID] --env production

# 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
vercel rollback [DEPLOYMENT_URL] --token $VERCEL_TOKEN

# 4. å‹•ä½œç¢ºèª
curl https://medicine-liff-api.your-subdomain.workers.dev/health
```

#### éšœå®³æ™‚ã®é€£çµ¡å…ˆ
- **é–‹ç™ºãƒãƒ¼ãƒ **: team@example.com
- **ã‚¤ãƒ³ãƒ•ãƒ©ãƒãƒ¼ãƒ **: infra@example.com
- **LINEå…¬å¼**: https://developers.line.biz/support/

---

å‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: [[05_å®Ÿè£…ã‚µãƒ³ãƒ—ãƒ«]]
æ¬¡ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: [[07_é‹ç”¨ãƒ»ä¿å®ˆ]]
